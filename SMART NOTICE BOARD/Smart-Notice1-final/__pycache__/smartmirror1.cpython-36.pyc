=!1;this.vd=d;this.V=new ntp_V(this);ntp_ij(this,ntp_l(ntp_8b,this.V));this.ub=0;this.wa=ntp_Ll(this);this.qa=[];this.Ia=[];this.Gb="";this.V.listen(window,
"resize",this.Fd,!1);ntp_Me(this.La);ntp_Ml(this.La,"DIV","mv-x-inner");this.V.listen(this.Kb,"click",this.hd,!1);ntp_Nl(this,this.Kb,[13],ntp_k(this.hd,this));this.V.listen(this.ka,"click",this.Dc,!1);ntp_Nl(this,this.ka,[13],ntp_k(this.Dc,this));this.V.listen(this.La,"click",this.Ga,!1);this.o.Yc(ntp_k(this.render,this));this.o.Xc(ntp_k(this.ud,this));window.addEventListener("message",ntp_k(this.Rd,this),!1);ntp_Me(this.ha)};ntp_o(ntp_3,ntp_u);
var ntp_Ol=function(a,b,c,d,e){this.o=a;this.R=b;this.V=c;this.H=d;this.page=e||null;this.W=!1},ntp_Pl=function(a,b){var c=[];if(a.R){var d=ntp_H();a.R.onload=function(){d.resolve(null)};c.push(d.rb)}if(a.V){var e=ntp_H();a.V.onload=ntp_k(function(){ntp_A(this.o,"mv-page");e.resolve(null)},a);c.push(e.rb)}if(a.H&&!a.W){var f=ntp_H(),g=ntp_k(function(){this.W=!0;f.resolve(null)},a);a.H.onload=g;a.H.onerror=g;c.push(f.rb)}a.page&&a.V&&(a=ntp_H(),b.push(a),c.push(a.rb));return c};
ntp_3.prototype.render=function(a){this.Ra?(a=this.ma.o,ntp_L(a,"webkitTransitionEnd",ntp_k(this.sd,this)),ntp_A(a,"mv-bl")):ntp_Ql(this,a)};
ntp_3.prototype.sd=function(a){if("opacity"===a.Ua.propertyName){this.Ra=!1;ntp_A(this.Pa,"mv-noti-hide");ntp_B(this.Qa,"mv-noti-hide");ntp_B(this.ha,"mv-x-hide");this.o.Hd()?ntp_B(this.ka,"mv-link-hide"):ntp_A(this.ka,"mv-link-hide");ntp_Rl(this);ntp_B(this.ha,"mv-x-hide");if(a=this.ma.o)if(ntp_ac(a))a.removeAllListeners("webkitTransitionEnd");else if(a=ntp_Ve(a)){var b=0,c="webkitTransitionEnd".toString(),d;for(d in a.o)if(!c||d==c)for(var e=a.o[d].concat(),f=0;f<e.length;++f)ntp_0e(e[f])&&++b}ntp_Ql(this,
!0)}};var ntp_Ql=function(a,b){var c=a.o.sc(),d=ntp_xb(c);if(b||d!==a.Gb||a.ub!==a.wa){a.Gb=d;a.R=[];for(b=0;8>b;b++)a.R.push(ntp_Sl(a,c[b],b));ntp_Tl(a)}},ntp_Tl=function(a){ntp_Me(a.ha);a.qa=[];var b=[];ntp_Ul(a,!1);a.ub=a.wa;for(var c=Math.min(a.R.length,2*a.ub),d=0;d<c;++d){var e=a.R[d];a.ha.appendChild(e.o);e.page&&(b=b.concat(ntp_Pl(e,a.qa)))}ntp_uj(b).then(ntp_k(ntp_3.prototype.Md,a))};ntp_3.prototype.Md=function(){ntp_Ul(this,!0);this.vd()};
var ntp_Ul=function(a,b){for(var c=0;c<a.Ia.length;++c)a.Ia[c].hidden=!b};
ntp_3.prototype.Rd=function(a){"chrome-search://most-visited"==a.origin&&("linkDisplayed"==a.data?0<this.qa.length&&this.qa.pop().resolve(null):"linkFocused"==a.data?(a=document.activeElement,a.classList.contains("mv-title")&&(a.classList.add("mv-focused"),this.U=a)):"linkBlurred"==a.data?(this.U&&this.U.classList.remove("mv-focused"),this.U=null):0==a.data.indexOf("tileBlacklisted")&&(a=a.data.split(",")[1])&&ntp_Vl(this,this.R[parseInt(a,10)].page||{})())};
var ntp_Sl=function(a,b,c){var d=ntp_Y("DIV","mv-tile");if(!b)return new ntp_Ol(d);var e=ntp_Y("DIV","mv-tile-inner");d.appendChild(e);var f=ntp_k(a.o.yc,a.o,b);a.Da&&(d.tabIndex=0,ntp_Nl(a,d,[13],f));f=ntp_Le(document,"iframe");f.id="title-"+c;f.setAttribute("role","presentation");a.Da||(f.tabIndex=0);if(ntp_J("ctStyle")&&ntp_yl){var g=a.H;g.V=ntp_yl.V||g.o}else g=a.H,g.V=g.o;f.src=a.o.Jb(ntp_Tj,b,c,a.H);f.className="mv-title";a.Da&&(f.tabIndex=-1);e.appendChild(f);if(g=a.o.jc(b,a.H))a.Ia.push(g),
e.appendChild(g);g=ntp_Le(document,"iframe");g.id="thumb-"+c;g.src=a.o.Jb(ntp_Vj,b,c,a.H);g.setAttribute("allowtransparency","true");g.className="mv-thumb";g.tabIndex=-1;ntp_Wl(g);e.appendChild(g);if(c=a.o.kc(b))c.tabIndex=-1,ntp_Wl(c),e.appendChild(c);if(a.o.jd(b)){c=ntp_Ml(e,"DIV","mv-x");ntp_Ml(c,"DIV","mv-x-inner");var h=ntp_Vl(a,b);a.V.listen(c,"click",h,!1);c.title=a.td;a.Da&&ntp_Nl(a,d,[46,8],h)}c=ntp_Le(document,"div");ntp_A(c,"mv-mask");e.appendChild(c);var k;a.H.qa&&(a=a.o.lc(b))&&(k=ntp_Ml(e,
"IMG","mv-fav"),ntp_Wl(k),k.src=a);return new ntp_Ol(d,f,g,k,b)},ntp_Vl=function(a,b){return ntp_k(function(a){a&&(a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0);this.Ra=!0;ntp_A(this.ha,"mv-x-hide");a:{a=0;for(var c=this.R.length;a<c;a++){var e=this.R[a];if(e.page===b){a=e;break a}}a=null}this.ma=a;this.o.dc(b)},a)};ntp_3.prototype.ud=function(){ntp_B(this.Pa,"mv-noti-hide");ntp_A(this.Qa,"mv-noti-hide");ntp_Rl(this)};
var ntp_Rl=function(a){ntp_f(a.W)&&window.clearTimeout(a.W);a.W=window.setTimeout(ntp_k(a.Ga,a),1E4)};ntp_3.prototype.Ga=function(){ntp_f(this.W)&&window.clearTimeout(this.W);this.W=null;ntp_A(this.Pa,"mv-noti-hide");ntp_A(this.Qa,"mv-noti-hide")};ntp_3.prototype.hd=function(){this.Ga();this.o.Pc(this.ma.page)};ntp_3.prototype.Dc=function(){this.Ga();this.o.Nc()};ntp_3.prototype.Fd=function(){var a;a=ntp_Ll(this);this.wa==a?a=!1:(this.wa=a,a=!0);a&&ntp_Tl(this)};
var ntp_Ll=function(a){return Math.max(2,Math.min(4,Math.floor(((window.innerWidth||1E3)+a.H.H-2*a.H.Ga-200)/(a.H.T+a.H.H))))},ntp_Ml=function(a,b,c){b=ntp_Le(document,b);c&&ntp_A(b,c);a.appendChild(b);return b},ntp_Wl=function(a){a.setAttribute("aria-hidden","true")},ntp_Nl=function(a,b,c,d){a.V.listen(b,"keydown",function(a){-1!=c.indexOf(a.keyCode)&&d(a)},!1)};ntp_3.prototype.Aa=function(){window.clearTimeout(this.W);ntp_3.S.Aa.call(this)};
var ntp_Xl=function(a){return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]/255+")"},ntp_4=function(a,b,c,d){this.Qa=b;this.U=new ntp_Lk;this.H=d;this.o=new ntp_V(this);ntp_ij(this,ntp_l(ntp_8b,this.o));this.o.listen(window,"resize",this.ub,!1);this.V=null;this.Ra=c;this.qa=ntp_J("mv-noti");this.ma=ntp_J("mv-noti-error");this.Da=ntp_J("mv-undo");this.R=ntp_J("mv-restore");this.ka=ntp_J("mv-noti-x");this.Ga=this.W=null;this.o=new ntp_V(this);ntp_ij(this,ntp_l(ntp_8b,this.o));ntp_Me(this.ka);a=this.ka;b=ntp_Le(document,
"DIV");ntp_A(b,"mv-x-inner");a.appendChild(b);this.o.listen(this.Da,"click",this.La,!1);ntp_Yl(this,this.Da,ntp_k(this.La,this));this.o.listen(this.R,"click",this.Ia,!1);ntp_Yl(this,this.R,ntp_k(this.Ia,this));this.o.listen(this.ka,"click",this.ha,!1);this.H.Yc(ntp_k(this.Pa,this))};ntp_o(ntp_4,ntp_u);
ntp_4.prototype.Pa=function(){for(var a=this.H.sc(),b=[],c=Math.min(8,a.length),d=0;d<c;++d){var e=a[d],f={cmd:"tile"};if(e.vb)f.rid=e.vb;else{f.url=e.url;f.title=e.title;f.id=f.tid=e.tid;if(47>ntp_1){var g=[],h=ntp_Uj(e,!1);null!=h&&g.push(h);g.push(e.thumbnail);f.thumbnailUrls=g}else g="",h=ntp_Uj(e,!0),null!=h&&(g=h),f.thumbnailUrl=g;f.faviconUrl=this.H.lc(e);f.pingUrl=ntp_tl(this.H,d);f.providers=ntp_Rj(e)}b.push(f)}b.push({cmd:"show",maxVisible:8});this.V.contentWindow.postMessage(b,"*")};
ntp_4.prototype.Gb=function(a){if("chrome-search://most-visited"==a.Ua.origin&&a.Ua.source==this.V.contentWindow){var b=a.Ua.data.cmd;a=a.Ua.data;if("tileBlacklisted"==b){b=this.H.sc();this.Ga=null;for(var c=Math.min(8,b.length),d=0;d<c;++d){var e=b[d];(e.vb||e.tid)==a.tid&&(ntp_A(this.ma,"mv-noti-hide"),ntp_B(this.qa,"mv-noti-hide"),this.H.Hd()?ntp_B(this.R,"mv-link-hide"):ntp_A(this.R,"mv-link-hide"),ntp_f(this.W)&&window.clearTimeout(this.W),this.W=window.setTimeout(ntp_k(this.ha,this),1E4),this.Ga=
e,this.H.dc(e))}}else"loaded"==b&&this.Ra()}};
ntp_4.prototype.render=function(){var a=ntp_J("mv-single");null!=a&&ntp_Ne(a);this.V=document.createElement("iframe");this.V.id="mv-single";a=[];a.push("removeTooltip="+encodeURIComponent(this.Qa));this.V.src="chrome-search://most-visited/single.html?"+a.join("&");ntp_J("mv-tiles").appendChild(this.V);this.V.onload=ntp_k(function(){this.Pa();var a={cmd:"updateTheme"},c=ntp_gl();c&&(a.tileBorderColor=ntp_Xl(c.Wc),a.tileHoverBorderColor=ntp_Xl(c.Ac),c?(c=c.Eb,c=128<=.3*c[0]+.59*c[1]+.11*c[2]):c=!1,
a.isThemeDark=c,a.tileTitleColor="#"+ntp_yl.V.substr(0,6),this.V.contentWindow.postMessage([a],"*"))},this);ntp_Zl(this);this.o.listen(window,"message",ntp_k(this.Gb,this))};var ntp_Zl=function(a){var b=a.U.T+a.U.H,c=Math.floor(((window.innerWidth||1E3)+a.U.H-200)/b),c=Math.max(2,Math.min(4,c));a.wa=c;a=c*b;ntp_J("mv-tiles").style.width=a+"px"};ntp_4.prototype.ub=function(){ntp_Zl(this)};
ntp_4.prototype.ha=function(){ntp_f(this.W)&&window.clearTimeout(this.W);this.W=null;ntp_A(this.ma,"mv-noti-hide");ntp_A(this.qa,"mv-noti-hide")};ntp_4.prototype.La=function(){this.ha();this.H.Pc(this.Ga)};ntp_4.prototype.Ia=function(){this.ha();this.H.Nc()};var ntp_Yl=function(a,b,c){var d=[13];a.o.listen(b,"keydown",function(a){-1!=d.indexOf(a.keyCode)&&c(a)},!1)};ntp_4.prototype.Aa=function(){window.clearTimeout(this.W);ntp_4.S.Aa.call(this)};
var ntp__l=function(a){a=void 0===a?new ntp_Zj:a;this.o=new Map;this.H=a;this.o.set("atyp","i")},ntp_0l=function(a,b,c){a.o.set(b,c);return a};ntp__l.prototype.log=function(){this.H.o.log("/gen_204",this.o);return this};var ntp_1l=ntp_i.indexedDB||ntp_i.mozIndexedDB||ntp_i.webkitIndexedDB||ntp_i.moz_indexedDB,ntp_2l=function(a,b){var c=new ntp_M,d=ntp_1l.open("esp-newtab",1);d.onsuccess=function(a){a=new ntp_Jl(a.target.result);c.Ba(a)};d.onerror=function(a){c.o(ntp_dk(a.target,"opening database esp-newtab"))};d.onupgradeneeded=function(b){if(a){var c=new ntp_Jl(b.target.result);a(new ntp_Kl(b.oldVersion,b.newVersion),c,new ntp_ol(b.target.transaction,c))}};d.onblocked=function(a){b&&b(new ntp_Kl(a.oldVersion,a.newVersion))}; return c},ntp_3l=function(){var a=new ntp_M,b=ntp_1l.deleteDatabase("esp-newtab");b.onsuccess=function(){a.Ba()};b.onerror=function(b){a.o(ntp_dk(b.target,"deleting